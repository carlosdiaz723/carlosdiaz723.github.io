@page "/newsletters/{year:int}/{month}"

@using System.Reflection
@using Microsoft.AspNetCore.Components

@if (_newsletterComponentType != null)
{
    <DynamicComponent Type="_newsletterComponentType" />
}
else
{
    <p>Newsletter not found for @Month @Year.
    </p>
}

@code {
    [Parameter] public int Year { get; set; }
    [Parameter] required public string Month { get; set; }

    private Type? _newsletterComponentType;
    protected override void OnInitialized()
    {
        string _monthFormatted = char.ToUpper(Month[0]) + Month.Substring(1).ToLower();
        string _typeName = $"NClubGA.Components.Newsletters._{Year}.{_monthFormatted}";
        var _allTypes = Assembly.GetExecutingAssembly().GetTypes().Select(t => t.FullName).ToArray();
        
        _newsletterComponentType = Assembly.GetExecutingAssembly().GetType(_typeName);
    }
}